"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
!function (t, e) {
  "object" == (typeof exports === "undefined" ? "undefined" : _typeof(exports)) && "undefined" != typeof module ? e(exports) : "function" == typeof define && define.amd ? define(["exports"], e) : e((t = "undefined" != typeof globalThis ? globalThis : t || self).svgExport = t.svgExport || {});
}(void 0, function (t) {
  "use strict";

  var e = {};
  function o(t, o) {
    e = {
      width: 100,
      height: 100,
      scale: 1,
      useCSS: !0,
      PDFOptions: {
        customFonts: [],
        pageLayout: {
          margin: 50,
          margins: {}
        },
        addTitleToPage: !0,
        chartCaption: "",
        PDFtextFontFamily: "Helvetica",
        PDFTitleFontSize: 20,
        PDFCaptionFontSize: 14
      }
    }, o && o.height ? "number" == typeof o.height && (e.height = o.height * e.scale) : e.height = document.querySelector(t).getBBox().height * e.scale, o && o.width ? "number" == typeof o.width && (e.width = o.width * e.scale) : e.width = document.querySelector(t).getBBox().width * e.scale, o && o.scale && "number" == typeof o.scale && (e.scale = o.scale), o && o.useCSS && "function" != typeof getComputedStyle ? (e.useCSS = !1, alert("Warning svg-export: this browser is not able to get computed styles")) : o && !1 === o.useCSS && (e.useCSS = !1), ["customFonts", "pageLayout", "addTitleToPage", "chartCaption", "PDFtextFontFamily", "PDFTitleFontSize", "PDFCaptionFontSize"].forEach(function (t) {
      if (o && o.PDFOptions && o.PDFOptions[t] && _typeof(o.PDFOptions[t]) == _typeof(e.PDFOptions[t])) {
        if ("" === o.PDFOptions[t]) return;
        e.PDFOptions[t] = o.PDFOptions[t];
      }
      "pageLayout" === t && (e.PDFOptions.pageLayout.margin || (e.PDFOptions.pageLayout.margin = 50), e.PDFOptions.pageLayout.margins || (e.PDFOptions.pageLayout.margins = {}));
    }), e.PDFOptions.pageLayout.margins.top = e.PDFOptions.pageLayout.margins.top || e.PDFOptions.pageLayout.margin, e.PDFOptions.pageLayout.margins.bottom = e.PDFOptions.pageLayout.margins.bottom || e.PDFOptions.pageLayout.margin, e.PDFOptions.pageLayout.margins.left = e.PDFOptions.pageLayout.margins.left || e.PDFOptions.pageLayout.margin, e.PDFOptions.pageLayout.margins.right = e.PDFOptions.pageLayout.margins.top || e.PDFOptions.pageLayout.margin, delete e.PDFOptions.pageLayout.margin, o && e.PDFOptions.pageLayout.size || (e.PDFOptions.pageLayout.size = [e.width + e.PDFOptions.pageLayout.margins.left + e.PDFOptions.pageLayout.margins.right, e.height + e.PDFOptions.pageLayout.margins.top + e.PDFOptions.pageLayout.margins.bottom + (e.PDFOptions.addTitleToPage ? 2 * e.PDFOptions.PDFTitleFontSize + 10 : 0) + ("" !== e.PDFOptions.chartCaption ? 4 * e.PDFOptions.PDFCaptionFontSize + 10 : 0)]);
  }
  function n(t) {
    var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
    var n = document.querySelector(t).cloneNode(!0);
    if (e.useCSS && function t(e, o) {
      for (var n = 0; n < e.children.length; n++) t(e.children[n], o.children[n]);
      for (var i = window.getComputedStyle(e), a = 0; a < i.length; a++) -1 === ["width", "height", "inline-size", "block-size"].indexOf(i[a]) && (o.style[i[a]] = i.getPropertyValue(i[a]));
    }(document.querySelector(t), n), n.setAttribute("width", e.width), n.setAttribute("height", e.height), n.setAttribute("preserveAspectRatio", "none"), n.setAttribute("viewBox", "0 0 " + document.querySelector(t).getBBox().width + " " + document.querySelector(t).getBBox().height), o) {
      var i = new XMLSerializer().serializeToString(n).replace(/currentColor/g, "black");
      return i.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/) || (i = i.replace(/^<svg/, '<svg xmlns="http://www.w3.org/2000/svg"')), i.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/) || (i = i.replace(/^<svg/, '<svg xmlns:xlink="http://www.w3.org/1999/xlink"')), i;
    }
    return n;
  }
  function i(t, e, o) {
    if (e = e.replace(/[/\\?%*:|"<>]/g, "_"), navigator.msSaveBlob) {
      for (var n = decodeURIComponent(t.split(",")[1]), i = [], a = t.split(",")[0].split(":")[1].split(";")[0], s = 0; s < n.length; s++) i.push(n.charCodeAt(s));
      var r;
      return r = null != o ? o.msToBlob() : new Blob([new Uint8Array(i)], {
        type: a
      }), navigator.msSaveBlob(r, e);
    }
    var p = document.createElement("a");
    p.download = e, p.href = t, document.body.appendChild(p), p.click(), document.body.removeChild(p);
  }
  function a(t, a, s, r) {
    if ("object" == (typeof canvg === "undefined" ? "undefined" : _typeof(canvg))) {
      "png" !== (r = r.toLowerCase().replace("jpg", "jpeg")) && "jpeg" !== r && (r = "png"), null == a && (a = "chart");
      var p = document.createElement("canvas");
      s && (s.width || s.height) || (e.scale = 10), o(t, s);
      var g = n(t);
      "jpeg" === r && (g = g.replace(">", "><rect x='0' y='0' width='" + e.width + "' height='" + e.height + "' fill='white'/>"));
      var l = p.getContext("2d");
      canvg.Canvg.fromString(l, g).start(), i(p.toDataURL("image/" + r), a + "." + r, p);
    } else alert("Error svg-export: PNG/JPEG export requires Canvg.js");
  }
  function s(t, o, n) {
    e.PDFOptions.addTitleToPage && t.font(e.PDFOptions.PDFtextFontFamily).fontSize(e.PDFOptions.PDFTitleFontSize).text(o, {
      width: e.PDFOptions.pageLayout.size[0] - e.PDFOptions.pageLayout.margins.left - e.PDFOptions.pageLayout.margins.right
    }), SVGtoPDF(t, n, e.PDFOptions.pageLayout.margins.left, t.y + 10, {
      width: e.width,
      height: e.height,
      preserveAspectRatio: "none",
      useCSS: e.useCSS
    }), "" !== e.PDFOptions.chartCaption && t.font(e.PDFOptions.PDFtextFontFamily).fontSize(e.PDFOptions.PDFCaptionFontSize).text(e.PDFOptions.chartCaption, e.PDFOptions.pageLayout.margins.left, e.PDFOptions.pageLayout.size[1] - e.PDFOptions.pageLayout.margins.bottom - 4 * e.PDFOptions.PDFCaptionFontSize, {
      width: e.PDFOptions.pageLayout.size[0] - e.PDFOptions.pageLayout.margins.left - e.PDFOptions.pageLayout.margins.right
    });
  }
  t.version = "1.0.0", t.downloadSvg = function (t, e, a) {
    null == e && (e = "chart"), o(t, a);
    var s = n(t);
    s = '<?xml version="1.0" standalone="no"?>\r\n' + s, i("data:image/svg+xml;charset=utf-8," + encodeURIComponent(s), e + ".svg");
  }, t.downloadPng = function (t, e, o) {
    a(t, e, o, "png");
  }, t.downloadJpeg = function (t, e, o) {
    a(t, e, o, "jpeg");
  }, t.downloadPdf = function (t, a, r) {
    if ("function" == typeof PDFDocument && "function" == typeof SVGtoPDF) {
      null == a && (a = "chart"), o(t, r);
      var p = n(t, !1),
        g = new PDFDocument(e.PDFOptions.pageLayout),
        l = g.pipe(blobStream());
      if (e.PDFOptions.customFonts.length > 0) {
        var u = function (t) {
          for (var e = [], o = 0; o < t.length; o++) {
            var n = new Promise(function (e, n) {
              var i = new XMLHttpRequest();
              i.onreadystatechange = function () {
                4 == i.readyState && 200 == i.status && e(i.response);
              }, i.open("GET", t[o], !0), i.responseType = "arraybuffer", i.send(null);
            });
            e.push(n);
          }
          return e;
        }(e.PDFOptions.customFonts.map(function (t) {
          return t.url;
        }));
        Promise.all(u).then(function (t) {
          for (var o = 0; o < t.length; o++) {
            for (var n = p.querySelectorAll("[style*='" + e.PDFOptions.customFonts[o].fontName + "']"), i = 0; i < n.length; i++) n[i].style.fontFamily = e.PDFOptions.customFonts[o].fontName;
            g.registerFont(e.PDFOptions.customFonts[o].fontName, t[o], e.PDFOptions.customFonts[o].styleName);
          }
          s(g, a, p), g.end();
        });
      } else s(g, a, p), g.end();
      l.on("finish", function () {
        i(l.toBlobURL("application/pdf"), a + ".pdf");
      });
    } else alert("Error svg-export: PDF export requires PDFKit.js and SVG-to-PDFKit");
  }, Object.defineProperty(t, "__esModule", {
    value: !0
  });
});
"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
var dateInputMask = function dateInputMask(e) {
  e.addEventListener("keyup", function (r) {
    (r.keyCode < 47 || r.keyCode > 57) && r.preventDefault();
    var t = e.value.length;
    1 === t && 3 === t || 47 == r.keyCode && r.preventDefault(), 2 === t && 8 !== r.keyCode && 46 !== r.keyCode && (e.value = e.value + "."), 5 === t && 8 !== r.keyCode && 46 !== r.keyCode && (e.value = e.value + ".");
  });
};
function isValidForm() {
  var e = !0;
  return document.querySelectorAll(".calc-request__form .form__input").forEach(function (r) {
    r.classList.contains("error") && (document.querySelector(".calc-request__form").classList.add("error"), e = !1);
  }), !0 === e && document.querySelector(".calc-request__form").classList.remove("error"), e;
}
function isValidName(e) {
  return e.value.length < 2 ? (e.classList.add("error"), isValidForm(), !1) : (e.classList.remove("error"), isValidForm(), !0);
}
function isValidDate(e) {
  var r = e.value;
  if (!/^\d{1,2}\.\d{1,2}\.\d{4}$/.test(r)) return e.classList.add("error"), isValidForm(), !1;
  var t = r.split("."),
    n = parseInt(t[0], 10),
    a = parseInt(t[1], 10),
    u = parseInt(t[2], 10);
  if (u < 1e3 || u > 3e3 || 0 == a || a > 12) return e.classList.add("error"), isValidForm(), !1;
  var c = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
  return (u % 400 == 0 || u % 100 != 0 && u % 4 == 0) && (e.classList.add("error"), c[1] = 29), n > 0 && n <= c[a - 1] ? (e.classList.remove("error"), isValidForm(), !0) : (e.classList.add("error"), isValidForm(), !1);
}
dateInputMask(document.querySelector(".form__input.bd-field")), document.querySelector(".form__input.bd-field").addEventListener("keyup", function (e) {
  return isValidDate(e.currentTarget);
}), document.querySelector(".form__input.name").addEventListener("keyup", function (e) {
  return isValidName(e.currentTarget);
}), document.addEventListener("click", function (e) {
  e.target.classList.contains("result-table__tooltip-svg") ? (document.querySelectorAll(".result-table__tooltip-modal").forEach(function (e) {
    e.classList.remove("active");
  }), e.target.closest(".result-table__tooltip").querySelector(".result-table__tooltip-modal").classList.add("active")) : document.querySelectorAll(".result-table__tooltip-modal").forEach(function (e) {
    e.classList.remove("active");
  });
}), document.querySelector(".calc-btn").addEventListener("click", function (e) {
  if (e.preventDefault(), isValidDate(document.querySelector(".form__input.bd-field")), isValidName(document.querySelector(".form__input.name")), !1 === isValidForm()) return !1;
  document.querySelector(".result-info__item--name .result-info__item-content").innerHTML = document.querySelector(".form__input.name").value, document.querySelector(".result-info__item--date .result-info__item-content").innerHTML = document.querySelector(".form__input.bd-field").value, document.querySelector(".result-info__item--age .result-info__item-content").innerHTML = function () {
    var e = document.querySelector(".form__input.bd-field").value.split("."),
      r = parseInt(e[0], 10),
      t = parseInt(e[1], 10),
      n = parseInt(e[2], 10),
      a = new Date(),
      u = new Date(n, t - 1, r),
      c = a.getFullYear() - u.getFullYear(),
      i = a.getMonth() - u.getMonth();
    return (i < 0 || 0 === i && a.getDate() < u.getDate()) && c--, c;
  }();
  var r = document.querySelector(".bd-field").value.split("."),
    t = r[0],
    n = r[1],
    a = r[2];
  var u = function u(e) {
      return e <= 22 ? Number(e) : String(e).split("").reduce(function (e, r) {
        return e + Number(r);
      }, 0);
    },
    c = {
      chakra1: function chakra1() {
        return t <= 22 ? Number(t) : t.split("").reduce(function (e, r) {
          return e + Number(r);
        }, 0);
      },
      chakra2: function chakra2() {
        return Number(n);
      },
      chakra3: function chakra3() {
        var e = a.split("").reduce(function (e, r) {
          return e + Number(r);
        }, 0);
        return u(e);
      },
      chakra4: function chakra4() {
        var e = this.chakra1() + this.chakra2() + this.chakra3();
        return u(e);
      },
      chakra5: function chakra5() {
        var e = this.chakra1() + this.chakra2() + this.chakra3() + this.chakra4();
        return u(e);
      },
      chakra6: function chakra6() {
        var e = this.chakra1() + this.chakra2();
        return u(e);
      },
      chakra7: function chakra7() {
        var e = this.chakra2() + this.chakra3();
        return u(e);
      },
      chakra8: function chakra8() {
        var e = this.chakra3() + this.chakra4();
        return u(e);
      },
      chakra9: function chakra9() {
        var e = this.chakra1() + this.chakra4();
        return u(e);
      },
      chakra10: function chakra10() {
        var e = this.chakra1() + this.chakra5();
        return u(e);
      },
      chakra11: function chakra11() {
        var e = this.chakra1() + this.chakra10();
        return u(e);
      },
      chakra12: function chakra12() {
        var e = this.chakra10() + this.chakra5();
        return u(e);
      },
      chakra13: function chakra13() {
        var e = this.chakra2() + this.chakra5();
        return u(e);
      },
      chakra14: function chakra14() {
        var e = this.chakra13() + this.chakra2();
        return u(e);
      },
      chakra15: function chakra15() {
        var e = this.chakra13() + this.chakra5();
        return u(e);
      },
      chakra16: function chakra16() {
        var e = this.chakra5() + this.chakra3();
        return u(e);
      },
      chakra17: function chakra17() {
        var e = this.chakra16() + this.chakra3();
        return u(e);
      },
      chakra18: function chakra18() {
        var e = this.chakra5() + this.chakra4();
        return u(e);
      },
      chakra19: function chakra19() {
        var e = this.chakra18() + this.chakra4();
        return u(e);
      },
      chakra20: function chakra20() {
        var e = this.chakra18() + this.chakra16();
        return u(e);
      },
      chakra21: function chakra21() {
        var e = this.chakra19() + this.chakra17();
        return u(e);
      },
      chakra22: function chakra22() {
        var e = this.chakra10() + this.chakra13();
        return u(e);
      }
    };
  var i = function i(e) {
    var r = Number(document.querySelector(".big" + e).innerHTML),
      t = Number(8 === e ? document.querySelector(".big1").innerHTML : document.querySelector(".big" + (e + 1)).innerHTML),
      n = _toConsumableArray(document.querySelectorAll(".outside" + e));
    e > 4 && n.reverse();
    n[3].innerHTML = u(r + t), n[5].innerHTML = function () {
      var e = Number(n[3].innerHTML) + t;
      return u(e);
    }(), n[4].innerHTML = function () {
      var e = Number(n[3].innerHTML) + Number(n[5].innerHTML);
      return u(e);
    }(), n[6].innerHTML = function () {
      var e = t + Number(n[5].innerHTML);
      return u(e);
    }(), n[1].innerHTML = function () {
      var e = Number(n[3].innerHTML) + r;
      return u(e);
    }(), n[0].innerHTML = function () {
      var e = r + Number(n[1].innerHTML);
      return u(e);
    }(), n[2].innerHTML = function () {
      var e = Number(n[3].innerHTML) + Number(n[1].innerHTML);
      return u(e);
    }();
  };
  for (var _e = 1; _e <= 22; _e++) document.querySelector(".chakra" + _e).innerHTML = c["chakra" + _e]();
  for (var _e2 = 1; _e2 <= 8; _e2++) i(_e2);
  (function (e) {
    for (var _r = 0; _r < e.length; _r++) for (var _t = 1; _t <= 7; _t++) if ("emotion" !== e[_r]) document.querySelector(".result-table .".concat(e[_r]).concat(_t)).innerHTML = document.querySelector(".result__matrix-image .".concat(e[_r]).concat(_t)).innerHTML;else {
      var _e3 = Number(document.querySelector(".result-table .fizik" + _t).innerHTML) + Number(document.querySelector(".result-table .energy" + _t).innerHTML);
      document.querySelector(".result-table .emotion" + _t).innerHTML = u(_e3);
    }
    for (var _r2 = 0; _r2 < e.length; _r2++) {
      var _t2 = 0;
      for (var _n = 1; _n <= 7; _n++) _t2 += Number(document.querySelector(".result-table .".concat(e[_r2]).concat(_n)).innerHTML), document.querySelector(".result-table .".concat(e[_r2], "8")).innerHTML = u(_t2);
    }
  })(["fizik", "energy", "emotion"]), document.querySelector(".sky").innerHTML = u(Number(document.querySelector(".chakra4").innerHTML) + Number(document.querySelector(".chakra2").innerHTML)), document.querySelector(".earth").innerHTML = u(Number(document.querySelector(".chakra1").innerHTML) + Number(document.querySelector(".chakra3").innerHTML)), document.querySelector(".personal-destiny").innerHTML = u(Number(document.querySelector(".sky").innerHTML) + Number(document.querySelector(".earth").innerHTML)), document.querySelector(".male").innerHTML = u(Number(document.querySelector(".chakra6").innerHTML) + Number(document.querySelector(".chakra8").innerHTML)), document.querySelector(".female").innerHTML = u(Number(document.querySelector(".chakra9").innerHTML) + Number(document.querySelector(".chakra7").innerHTML)), document.querySelector(".social-destiny").innerHTML = u(Number(document.querySelector(".male").innerHTML) + Number(document.querySelector(".female").innerHTML)), document.querySelector(".spirit-destiny").innerHTML = u(Number(document.querySelector(".personal-destiny").innerHTML) + Number(document.querySelector(".social-destiny").innerHTML)), document.querySelector(".planet-destiny").innerHTML = u(Number(document.querySelector(".social-destiny").innerHTML) + Number(document.querySelector(".spirit-destiny").innerHTML)), document.querySelector(".result").classList.add("active"), document.querySelector("#result-anchor").scrollIntoView({
    behavior: "smooth"
  });
}), document.querySelector(".download").addEventListener("click", function (e) {
  svgExport.downloadPng("#matrixsvg", "" + document.querySelector(".result-info__item--name .result-info__item-content").innerHTML, {
    originalWidth: 650,
    originalHeight: 601,
    width: 3250,
    height: 3005,
    scale: 1,
    useCSS: !1,
    excludeByCSSSelector: "",
    transparentBackgroundReplace: "white",
    allowCrossOriginImages: !0
  });
});